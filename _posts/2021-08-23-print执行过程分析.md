---
published: true
layout: post
title: python print执行过程分析
category: python
tags:
  - python
time: '2021.08.23 12:44:00'
excerpt: null
---
python print()函数在cpython内部的执行过程简单梳理

<!--more-->

## 主要流程介绍
实际这个测试文件test.py就一行代码：print('Hello World!')。
```python
print('Hello World!')
```
相关的自己码为：
```
   1           0 LOAD_NAME                0 (print)
              2 LOAD_CONST               0 ('Hello World!')
              4 CALL_FUNCTION            1
              6 POP_TOP
              8 LOAD_CONST               1 (None)
             10 RETURN_VALUE

```
实际的函数调用逻辑如下图所示。

print()过程：pythonrun.c:pyrun_file()->run_mod(mod)->run_eval_code_obj(co)->PyEval_EvalCode()->_PyEval_Vector():创建PyFrameObject->_PyEval_EvalFrame(tstate, f, 0): tstate->interp->eval_frame(tstate, f, throwflag);->call_function->PyObject_Vectorcall->_PyObject_VectorcallTstate->cfunction_vectorcall_FASTCALL_KEYWORDS->builtin_print()
