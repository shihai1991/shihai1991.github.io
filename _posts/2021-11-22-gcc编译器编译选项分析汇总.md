---
published: true
layout: post
title: gcc编译选项分析汇总
category: gcc
tags:
  - gcc
time: '2016.11.20 09:24:00'
excerpt: null
catalog: true
subtitle: 自己不懂的、容易忘记的都持续记录一下。
---

<!--more-->
## `gcc -c` 和 `gcc -s`
- -c：编译或者汇编，但是不链接，此编译产物一般用于构建静态文件。
- -S：仅编译，不会汇编或者链接。

## pthread/lpthread
在05年前，有各类不兼容的pthreads API实现，所以必须用`lpthread`来指定，但现在的操作系统就没有这个问题就可以使用`pthread`。

## Xlinker
编译需要链接动/静态文件则需要此参数，等价于Wl。一个是`-WL,option`，另一个是`-Xlinker option`。

## export-dynamic
这个编译选项会让链接动作添加所有符号，不仅仅是使用到的符号表，而且还包括动态符号。

## ar crs
将若干.o文件打包成一个静态文件。

## objdump
`objdump -T`用来查看符号表，`objdump -R`查看动态重定位信息。

## 参考文献
[https://www.cnblogs.com/rickyk/p/4186902.html](https://www.cnblogs.com/rickyk/p/4186902.html)
[https://www.cnblogs.com/wujianlundao/archive/2012/06/06/2538125.html](https://www.cnblogs.com/wujianlundao/archive/2012/06/06/2538125.html)
[https://stackoverflow.com/questions/2156457/why-does-the-export-dynamic-flag-not-apply-to-archives](https://stackoverflow.com/questions/2156457/why-does-the-export-dynamic-flag-not-apply-to-archives)