---
layout: post
title: 代码检视prompt提示词学习和应用
category: AI
catalog: true
published: false
tags:
  - AI
time: '2025.08.02 15:49:00'
---
> 个人学习使用，信息基本来源于Coplit。

训练一个能生成高质量**代码检视（Code Review）prompt**的流程，可以分为以下几个关键步骤：

---

## 1. 明确目标和标准

- **目标**：让模型生成能指导开发者有效、全面地进行代码检视的提示语（prompt）。
- **标准**：prompt应覆盖代码风格、逻辑正确性、安全性、性能、可读性、文档等多方面，并能适应不同语言和场景。

---

## 2. 收集高质量示例

- **真实代码检视评论**：收集GitHub、GitLab等平台上的优质Code Review内容。
- **专业书籍/博客**：比如Google、Microsoft等大厂的代码检视指南。
- **社区讨论**：Stack Overflow、Reddit等上的代码检视问题和回答。

---

## 3. 标注和归纳常用检视要点

整理出不同场景下代码检视的常见关注点，例如：

- 语法/风格一致性
- 变量/函数命名合理性
- 代码是否易读、可维护
- 是否有冗余/死代码
- 性能和资源消耗
- 边界条件和异常处理
- 安全隐患
- 单元测试覆盖情况
- 注释和文档是否齐全

---

## 4. 设计和优化Prompt模板

可以采用类似如下的Prompt模板：

```text
请对以下代码进行全面检视，关注但不限于以下方面：
1. 代码风格与一致性
2. 逻辑正确性
3. 性能和资源消耗
4. 安全隐患
5. 可读性与可维护性
6. 变量和函数命名
7. 异常处理与边界条件
8. 测试覆盖率
9. 注释和文档

请详细指出发现的问题，并给出改进建议。
```

也可针对不同语言、框架做定制化：

```text
请以Python专家身份，对以下Python代码做代码检视。关注PEP8规范、异常处理、性能优化、可读性和安全性等方面。请举例说明问题和改进方案。
```

---

## 5. 微调/训练模型

- **数据准备**：用上述标注和模板，制作训练数据集，把代码片段和检视目标作为输入，把高质量检视意见作为输出。
- **训练方法**：采用对话式微调（Instruction Tuning）、RLHF（人类反馈强化学习）等方法。
- **评估指标**：通过人工评审或自动化指标（如覆盖面、深度、准确性）评估prompt生成质量。

---

## 6. 自动化测试和真实场景验证

- **生成多样化prompt**，让开发者或模型在实际Code Review流程中试用，收集反馈持续优化。
- **A/B测试**，对比不同prompt在实际代码检视效率和质量上的提升。

---

## 7. 持续迭代和知识更新

- 跟进社区最佳实践和最新安全/规范要求，不断丰富和调整Prompt模板。
- 收集用户反馈，优化Prompt生成逻辑。

---

**总结：**  
训练高质量代码检视prompt，本质是**高质量数据积累 + 结构化归纳 + 模板设计 + 持续迭代**。实践时，可以先从手动总结和模板出发，逐步过渡到自动化/模型训练阶段。

如需具体示例或代码实现，可以告诉我你关注的具体语言、框架或应用场景！

训练一个能生成高质量**代码检视（Code Review）prompt**的流程，可以分为以下几个关键步骤：

---

## 1. 明确目标和标准

- **目标**：让模型生成能指导开发者有效、全面地进行代码检视的提示语（prompt）。
- **标准**：prompt应覆盖代码风格、逻辑正确性、安全性、性能、可读性、文档等多方面，并能适应不同语言和场景。

---

## 2. 收集高质量示例

- **真实代码检视评论**：收集GitHub、GitLab等平台上的优质Code Review内容。
- **专业书籍/博客**：比如Google、Microsoft等大厂的代码检视指南。
- **社区讨论**：Stack Overflow、Reddit等上的代码检视问题和回答。

---

## 3. 标注和归纳常用检视要点

整理出不同场景下代码检视的常见关注点，例如：

- 语法/风格一致性
- 变量/函数命名合理性
- 代码是否易读、可维护
- 是否有冗余/死代码
- 性能和资源消耗
- 边界条件和异常处理
- 安全隐患
- 单元测试覆盖情况
- 注释和文档是否齐全

---

## 4. 设计和优化Prompt模板

可以采用类似如下的Prompt模板：

```text
请对以下代码进行全面检视，关注但不限于以下方面：
1. 代码风格与一致性
2. 逻辑正确性
3. 性能和资源消耗
4. 安全隐患
5. 可读性与可维护性
6. 变量和函数命名
7. 异常处理与边界条件
8. 测试覆盖率
9. 注释和文档

请详细指出发现的问题，并给出改进建议。
```

也可针对不同语言、框架做定制化：

```text
请以Python专家身份，对以下Python代码做代码检视。关注PEP8规范、异常处理、性能优化、可读性和安全性等方面。请举例说明问题和改进方案。
```

---

## 5. 微调/训练模型

- **数据准备**：用上述标注和模板，制作训练数据集，把代码片段和检视目标作为输入，把高质量检视意见作为输出。
- **训练方法**：采用对话式微调（Instruction Tuning）、RLHF（人类反馈强化学习）等方法。
- **评估指标**：通过人工评审或自动化指标（如覆盖面、深度、准确性）评估prompt生成质量。

---

## 6. 自动化测试和真实场景验证

- **生成多样化prompt**，让开发者或模型在实际Code Review流程中试用，收集反馈持续优化。
- **A/B测试**，对比不同prompt在实际代码检视效率和质量上的提升。

---

## 7. 持续迭代和知识更新

- 跟进社区最佳实践和最新安全/规范要求，不断丰富和调整Prompt模板。
- 收集用户反馈，优化Prompt生成逻辑。

---

**总结：**  
训练高质量代码检视prompt，本质是**高质量数据积累 + 结构化归纳 + 模板设计 + 持续迭代**。实践时，可以先从手动总结和模板出发，逐步过渡到自动化/模型训练阶段。

## 1. OpenAI Prompt Engineering Resources

- **OpenAI Cookbook**  
  [OpenAI Cookbook: Prompt Engineering](https://cookbook.openai.com/examples/prompt_engineering)  
    官方提供大量 prompt 设计和优化案例，涵盖代码、文本、分析等多种场景。

    - **OpenAI Prompt Library**  
      [OpenAI Prompt Library](https://platform.openai.com/examples)  
        各类任务的优质 prompt 示例，包括代码解释、代码检视、安全检查等。

        ---

## 2. GitHub 上的热门 Prompt 项目

- **awesome-chatgpt-prompts**  
  [f/awesome-chatgpt-prompts](https://github.com/f/awesome-chatgpt-prompts)  
    业内最知名的 ChatGPT prompt 收集项目，涵盖编程、代码检视、安全、测试等场景。

    - **Awesome Prompt Engineering**  
      [dair-ai/Prompt-Engineering-Guide](https://github.com/dair-ai/Prompt-Engineering-Guide)  
        包含 prompt 工程的理论、实战和案例，适合系统性学习和参考。

        - **Prompt-Templates-for-Developers**  
          [microsoft/Prompt-Templates-for-Developers](https://github.com/microsoft/Prompt-Templates-for-Developers)  
            微软官方收集的开发相关 prompt 模板，包括代码评审、重构、安全等。

            - **Code Review Prompts**  
              [lucas-mc/awesome-code-review-prompts](https://github.com/lucas-mc/awesome-code-review-prompts)  
                专注于代码检视的 prompt 集合，适合参考和定制。

                ---

## 3. 安全相关 Prompt 项目

- **AI Security Auditing Prompts**  
  [prompt-engineering-for-security](https://github.com/0xpayne/prompt-engineering-for-security)  
    收集了大量安全审计、代码安全检查相关的 prompt。

    - **OpenAI Security Examples**  
      [OpenAI Security Prompts](https://platform.openai.com/examples?category=security)  
        官方安全相关 prompt 示例，包括代码注入检测、敏感信息发现等。

        ---

## 4. 其它值得一试的 Prompt 项目/平台

- **LangChain Hub**  
  [LangChainHub](https://smith.langchain.com/hub)  
    包含各类 prompt 模板，支持多任务调用和定制。

    - **Promptist**  
      [Promptist](https://promptist.ai/)  
        在线 prompt 市集，可浏览、搜索和复用各种领域 prompt。

        ---

## 5. 额外推荐

- **Awesome Prompt Engineering**  
  [trigaten/awesome-prompt-engineering](https://github.com/trigaten/awesome-prompt-engineering)  
    收录了大量 prompt工程、项目、论文和工具。

    ---

### 使用建议

1. **先浏览项目内容**，找到与你需求最相关的 prompt 模板或案例。
2. **结合自身场景定制**，例如安全、代码检视，可以参考 GitHub 上专门收集此类 prompt 的项目。
3. **实际测试效果**，不断调整和优化 prompt 细节，结合业务需求迭代。
