---
layout: post
title: 编译原理学习
category: compiler
catalog: false
published: false
tags:
  - compiler
time: '2026.02.01 22:48:00'
---

# 编译程序基本概念
## 什么是编译程序？
通过编译程序(`compiler`)将高级程序设计语言翻译成低级程序设计语言。
<img width="857" height="423" alt="image" src="https://github.com/user-attachments/assets/a9ff6066-9a12-4252-bb8a-5548d794e175" />
<img width="869" height="243" alt="image" src="https://github.com/user-attachments/assets/a1d3cc6f-690b-441a-9060-6e14ac0a7121" />
解释程序(`interpreter`)解释一句就提交计算机执行一句，并不形成目标程序。
<img width="910" height="297" alt="image" src="https://github.com/user-attachments/assets/4c323620-c2f8-4bb7-a405-c39647397a37" />

生成中间代码及以前称之为`前端`：词法分析、语法分析、语义分析，后面则被称之为`后端`。
<img width="839" height="459" alt="image" src="https://github.com/user-attachments/assets/d35c6aca-5ee2-4b7c-a086-287066983970" />

<img width="921" height="325" alt="image" src="https://github.com/user-attachments/assets/74479c4c-68ba-4974-905e-b95b1a758691" />

## 编译过程实例分析
语法分析关注句子写的对不对，语义分析关注句子写的有没有意义。如：`a=1+"2"`，语法分析是正确的，但语义分析会报错。
<img width="740" height="394" alt="image" src="https://github.com/user-attachments/assets/242b1841-f7aa-421b-ac18-19ebbc12ced2" />
<img width="785" height="256" alt="image" src="https://github.com/user-attachments/assets/3ddf9c2d-fef8-4b6c-85c6-32a4fdb199b5" />
<img width="851" height="420" alt="image" src="https://github.com/user-attachments/assets/9bc2ac6a-af3d-4278-919a-b2c88efa7e96" />
<img width="844" height="285" alt="image" src="https://github.com/user-attachments/assets/3331b8be-cab1-4a86-be94-14ad436c58ae" />
<img width="660" height="445" alt="image" src="https://github.com/user-attachments/assets/8abcf002-5967-4218-a244-8297a09fedb0" />
<img width="688" height="539" alt="image" src="https://github.com/user-attachments/assets/14e94736-a81f-4bd6-9d9b-21d96d231a9f" />
<img width="823" height="606" alt="image" src="https://github.com/user-attachments/assets/1cb1d640-d9da-4546-8236-4fcc492a10af" />
<img width="821" height="577" alt="image" src="https://github.com/user-attachments/assets/d91c5c5a-b683-4634-8b6b-96fdc5c21955" />
<img width="915" height="682" alt="image" src="https://github.com/user-attachments/assets/9aa0f19d-23e8-458d-882b-b2848c81bd16" />

# 形式语言基础
文法是用有限的集合描述无限的集合。
文法（Grammar） 是一套严格的规则集合，用于定义一门语言的合法符号串（句子 / 表达式） 的构成方式，简单来说：文法规定了 “什么话能说，什么话不能说，以及该怎么说”。
计算机领域最常用的是乔姆斯基（Chomsky）文法分层，它根据规则的严格程度，将文法分为 4 类，对应 4 类形式语言和 4 类自动机，从 0 到 3 规则越来越严格，表达能力越来越弱，但可计算性越来越强。
|文法类型|别称|核心规则形式（α→β）|对应语言|对应自动机|典型应用|
|---|---|---|---|---|---|
|0型文法|短语文法|α为任意符号串，β为非空符号串|0型语言|图灵机|描述所有可计算语言|
|1型文法|上下文有关文法|α的长度 ≤ β的长度（|α| ≤ |β|）|1型语言|线性有界自动机|自然语言语法描述|
|2型文法|上下文无关文法|α为单个非终结符|2型语言|下推自动机|程序设计语言（C/Java/Python）的语法、表达式解析|
|3型文法|正则文法（正规文法）|α为单个非终结符；β为「终结符+非终结符」（右线性）或「非终结符+终结符」（左线性）|3型语言|有限自动机/正则表达式|词法分析、正则匹配、程序语言标识符/关键字定义|
补充备注：表格中「α」「β」均为文法中的符号串；「终结符」为不可再分解的原子符号，「非终结符」为可通过规则分解的语法范畴（如前文案例中的<表达式>）。

上下文无关文法，核心是“**上下文无关**”——即文法中的非终结符，无论出现在符号串的任何位置，其替换规则始终保持一致，不依赖周围的符号环境。以下是其完整核心定义表，清晰梳理所有关键要素：

|核心要素|具体定义|
|---|---|
|文法类型|2型文法，又称上下文无关文法（Context-Free Grammar, CFG），乔姆斯基文法体系2型|
|终结符|语言的最小原子符号，不可再分解（如数字0-9、运算符+/*、程序关键字if/for、自然语言的基础字词）|
|非终结符|表示语法范畴的抽象符号，可通过产生式规则分解（常用尖括号标识，如<表达式>、<项>、<语句>）|
|开始符号|顶层非终结符，所有合法符号串均从该符号开始推导（如算术表达式中的<表达式>）|
|产生式规则|核心约束：产生式左部（α）必须是单个非终结符，右部（β）可为任意非空的终结符、非终结符组合；示例（算术表达式）：1. <表达式> → <表达式> + <项>l<项> 2. <项> → <项> * <因子>l<因子> 3. <因子> → ( <表达式> )l数字|
|核心特征|非终结符替换与上下文无关；天然支持嵌套、递归结构，可描述复杂语法逻辑|
|对应语言|2型语言（上下文无关语言）|
|对应自动机|下推自动机（Pushdown Automaton, PDA），是编译器语法分析的核心载体|
|典型应用|程序设计语言语法定义、编译器语法分析、算术表达式解析、配置文件语法设计|

合法表达式推导过程（以 (1+2)*3 为例），推导说明：基于上下文无关文法（2型文法），从开始符号<表达式>出发，通过逐步替换非终结符（应用产生式规则），最终得到仅含终结符的合法表达式，「⇒」表示一次规则替换。
|推导步骤|推导过程|应用的产生式规则|
|---|---|---|
|1|<表达式>|初始开始符号|
|2|⇒ <项>|<表达式> → <项>|
|3|⇒ <项> * <因子>|<项> → <项> * <因子>|
|4|⇒ <因子> * <因子>|<项> → <因子>|
|5|⇒ ( <表达式> ) * <因子>|<因子> → ( <表达式> )|
|6|⇒ ( <表达式> + <项> ) * <因子>|<表达式> → <表达式> + <项>|
|7|⇒ ( <项> + <项> ) * <因子>|<表达式> → <项>|
|8|⇒ ( <因子> + <项> ) * <因子>|<项> → <因子>|
|9|⇒ ( 1 + <项> ) * <因子>|<因子> → 数字（此处数字=1）|
|10|⇒ ( 1 + <因子> ) * <因子>|<项> → <因子>|
|11|⇒ ( 1 + 2 ) * <因子>|<因子> → 数字（此处数字=2）|
|12|⇒ ( 1 + 2 ) * 3|<因子> → 数字（此处数字=3）|
推导结论：通过12步规则替换，从开始符号<表达式>推导出(1+2)*3，该表达式为上下文无关文法定义的合法表达式。

<img width="911" height="702" alt="image" src="https://github.com/user-attachments/assets/14e5f80a-31f1-4446-8114-2d5af853ff97" />
<img width="901" height="645" alt="image" src="https://github.com/user-attachments/assets/e94caacf-3e8f-496f-8b9c-a979cf1a5d86" />
<img width="904" height="581" alt="image" src="https://github.com/user-attachments/assets/7d65773b-8da2-4c82-b5e6-b88f46f11433" />
<img width="929" height="403" alt="image" src="https://github.com/user-attachments/assets/f4cb4ac1-2f66-4812-9f80-1bbbcbd354bc" />
<img width="848" height="621" alt="image" src="https://github.com/user-attachments/assets/533f9074-0fbc-4f7d-af55-e4a279728877" />
<img width="871" height="454" alt="image" src="https://github.com/user-attachments/assets/552718cc-81f6-4078-be2c-7ebecccb6ad6" />







